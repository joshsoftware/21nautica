.row
  %hr
  = simple_nested_form_for @local_import , html: {class: 'form-horizontal'}, defaults: {input_html: {class: 'form-control'}} do |f|
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :reference_number, label: "Ref. Number", input_html: {:"data-validation" => "required", :"data-validation-error-msg" => "This field is mandatory"}
      .col-md-6
        = f.input :reference_date, as: :string, label: "Ref Date", input_html: { value: localize(f.object.reference_date || Date.today, format: "%d-%m-%Y"), class: 'form-control date', data: {behaviour: "datepicker"}}
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :idf_number, label: "IDF Number"
      .col-md-6
        = f.input :idf_date, as: :string, label: "IDF Date", input_html: { value: localize(f.object.idf_date || Date.today, format: "%d-%m-%Y"), class: 'form-control date', data: {behaviour: "datepicker"}}
    .row{style:"margin-left:2%;"}  
      .col-md-6
        %div{data: {for: 'customerSelect'}}
          = render '/shared/customer', customers: @customers, model: 'local_import'
      .col-md-6
        = f.input :invoice_number, input_html: {:"data-validation" => "required", :"data-validation-error-msg" => "This field is mandatory"}
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :shipper
      .col-md-6
        = f.input :description
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :gwt, label: "GWT"
      .col-md-6
        = f.input :customer_reference, label: "Customer Ref."
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :equipment_type, collection: EQUIPMENT_TYPE, as: :select, include_blank: false
      .col-md-6
        = f.input :vessel_name
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :estimated_arrival, as: :string, input_html: { value: localize(f.object.estimated_arrival || Date.today, format: "%d-%m-%Y"), class: 'form-control date', data: {behaviour: "datepicker"}}
      .col-md-6
        %div{data: {for: 'customerSelect'}}
          = render '/shared/shipping_line', shippers: get_shipping_line_vendors, model: 'local_import'
    .row{style:"margin-left:2%;"}
      .col-md-6
        = f.input :fpd, collection: [:Nairobi, :Mombasa], as: :select, include_blank: false, label: "FPD"

    .row{style:"margin-left:2%;margin-top:1%"}
      .col-md-3
        %b Exemption Code Needed &emsp;
      .col-md-1
        %input{:type => "checkbox", :class => "form-check-input", :name => "exemption_code_needed", :id => "ecn"}
    .row{style:"margin-left:2%;margin-top:2%"} 
      .col-md-3
        %b KEBS Exemption Code Needed &emsp;
      .col-md-1
        %input{:type => "checkbox", :class => "form-check-input2", "data-column" => "kebs_exemption_code_needed", :name => "kebs_exemption_code_needed", :id => "kecn"}
    %hr
    .row{style:"margin-left:2%;"}
      .col-md-8
        %div.scrollable-menu
          = f.fields_for :local_import_items, html: {class: 'number'} do |item_form|
            .col-md-8
              = item_form.input :container_number, label: "Container", input_html: {class: 'form-control'}
            .col-md-2
              = item_form.link_to_remove 'Remove', class: 'btn btn-danger btn-sm'
          = f.link_to_add "Add Container", :local_import_items, class: 'btn btn-primary btn-sm'
   
    %hr
    .row{style:"margin-left:2%;"}
      .form-group
        .col-sm-offset-4.col-sm-2
          = f.submit 'Save', class: 'btn btn-primary', "data-disable-with" => "saving..."
    %hr
:javascript
  $(document).ready(function(){
    $("[data-for='multiselect']").select2();
  })

  $('#ecn').on('change', function() {
    console.log("Here")
    checked = $('#ecn').prop('checked')
    $('#ecn').prop('value', checked)
  })

  $('#kecn').on('change', function() {
    console.log("Here")
    checked = $('#kecn').prop('checked')
    $('#kecn').prop('value', checked)
  })
